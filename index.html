<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Julian Date And Batch Code Display</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="dashboard-header">
        <h1 class="text-center mb-4">Julian Date And Batch Code Display</h1>
        <div class="info-cards">
          <div class="info-card">
            <h5 class="card-title">Current Julian Date</h5>
            <p id="julianDaily" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Date & Time</h5>
            <p id="currentDateTime" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Batch Code (Example)</h5>
            <p
              id="currentBatchCode"
              class="font-weight-bold mb-0"
              style="
                font-family: monospace;
                font-size: 1.2rem;
                color: var(--primary-color);
              "
            ></p>
          </div>
        </div>
      </div>

      <div class="table-container">
        <div id="expiry-info">
          <h5 class="text-primary p-3 mb-0">Shelf Life Expiration Dates</h5>
          <div class="table-responsive">
            <table class="table table-bordered mb-0">
              <thead>
                <tr>
                  <th>Shelf Life</th>
                  <th>Expiration Date</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>9 months</td>
                  <td id="expiry-9"></td>
                </tr>
                <tr>
                  <td>10 months</td>
                  <td id="expiry-10"></td>
                </tr>
                <tr>
                  <td>12 months</td>
                  <td id="expiry-12"></td>
                </tr>
                <tr>
                  <td>15 months</td>
                  <td id="expiry-15"></td>
                </tr>
                <tr>
                  <td>18 months</td>
                  <td id="expiry-18"></td>
                </tr>
                <tr>
                  <td>24 months</td>
                  <td id="expiry-24"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ================== KHU VỰC TÍNH TOÁN MỚI ================== -->
      <div class="calculator-container">
        <h4 class="text-center mb-4">Production Date Calculator</h4>
        <div class="row">
          <!-- Tính từ Batch Code -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-barcode"></i> From Batch Code
                </h5>
                <div class="form-group">
                  <label for="batchInput">Enter Batch Code:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="batchInput"
                    placeholder="e.g., 60022131X"
                  />
                </div>
                <button id="calcFromBatchBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
          <!-- Tính từ Hạn sử dụng -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-calendar-times"></i> From Expiration Date
                </h5>
                <div class="form-group">
                  <label for="expiryInput">Enter Expiration Date:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="expiryInput"
                    placeholder="DD.MM.YYYY"
                  />
                </div>
                <div class="form-group">
                  <label for="shelfLifeSelect">Select Shelf Life:</label>
                  <select class="form-control" id="shelfLifeSelect">
                    <option value="9">9 months</option>
                    <option value="10">10 months</option>
                    <option value="12">12 months</option>
                    <option value="15">15 months</option>
                    <option value="18">18 months</option>
                    <option value="24">24 months</option>
                  </select>
                </div>
                <button id="calcFromExpiryBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- Khu vực hiển thị kết quả -->
        <div
          id="calcResult"
          class="alert alert-info mt-4"
          role="alert"
          style="display: none"
        ></div>
      </div>
      <!-- ============================================================= -->

      <!-- Bảng cho Packing Line -->
      <div class="table-container mt-5">
        <h4 class="mb-3">
          <i class="fas fa-box-open"></i> Packing Line Information
        </h4>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Group</th>
                <th>Production Line</th>
                <th>Shelf Life</th>
                <th>Batch Code</th>
                <th>Expiration Date (Bag)</th>
                <th>Expiration Date (Carton)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2IN1</td>
                <td>SANKO 14</td>
                <td>12 tháng</td>
                <td id="pack-batchCode"></td>
                <td id="pack-expirationDateBag"></td>
                <td id="pack-expirationDateCarton"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 12</td>
                <td>9 tháng</td>
                <td id="pack-batchCode2"></td>
                <td id="pack-expirationDateBag2"></td>
                <td id="pack-expirationDateCarton2"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 711</td>
                <td>9 tháng</td>
                <td id="pack-batchCode711"></td>
                <td id="pack-expirationDateBag711"></td>
                <td id="pack-expirationDateCarton711"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>TOPACK 34</td>
                <td>9 tháng</td>
                <td id="pack-batchCode34"></td>
                <td id="pack-expirationDateBag34"></td>
                <td id="pack-expirationDateCarton34"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 48</td>
                <td>15 tháng</td>
                <td id="pack-batchCode48"></td>
                <td id="pack-expirationDateBag48"></td>
                <td id="pack-expirationDateCarton48"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 26</td>
                <td>15 tháng</td>
                <td id="pack-batchCode26"></td>
                <td id="pack-expirationDateBag26"></td>
                <td id="pack-expirationDateCarton26"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 12</td>
                <td>15 tháng</td>
                <td id="pack-batchCodeMes12"></td>
                <td id="pack-expirationDateBagMes12"></td>
                <td id="pack-expirationDateCartonMes12"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 3</td>
                <td>15 tháng</td>
                <td id="pack-batchCodeMes3"></td>
                <td id="pack-expirationDateBagMes3"></td>
                <td id="pack-expirationDateCartonMes3"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>OLYMPIA 2</td>
                <td>12 tháng</td>
                <td id="pack-batchCodeO2"></td>
                <td id="pack-expirationDateBagO2"></td>
                <td id="pack-expirationDateCartonO2"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SU 52</td>
                <td>12 tháng</td>
                <td id="pack-batchCodeSu52"></td>
                <td id="pack-expirationDateBagSu52"></td>
                <td id="pack-expirationDateCartonSu52"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>NALBACH</td>
                <td>12 tháng</td>
                <td id="pack-batchCodeNal"></td>
                <td id="pack-expirationDateBagNal"></td>
                <td id="pack-expirationDateCartonNal"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SANKO 10</td>
                <td>12 tháng</td>
                <td id="pack-batchCode10"></td>
                <td id="pack-expirationDateBag10"></td>
                <td id="pack-expirationDateCarton10"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SANKO 10</td>
                <td>10 tháng</td>
                <td id="pack-batchCodeMilk10"></td>
                <td id="pack-expirationDateBagMilk10"></td>
                <td id="pack-expirationDateCartonMilk10"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>MESPACK</td>
                <td>24 tháng</td>
                <td id="pack-batchCodeGold24"></td>
                <td id="pack-expirationDateBagGold24"></td>
                <td id="pack-expirationDateCartonGold24"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>MESPACK</td>
                <td>18 tháng</td>
                <td id="pack-batchCodeMes18"></td>
                <td id="pack-expirationDateBagMes18"></td>
                <td id="pack-expirationDateCartonMes18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCUNI</td>
                <td>18 tháng</td>
                <td id="pack-batchCodeUni18"></td>
                <td id="pack-expirationDateBagUni18"></td>
                <td id="pack-expirationDateCartonUni18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCTAWO</td>
                <td>18 tháng</td>
                <td id="pack-batchCodeTawo18"></td>
                <td id="pack-expirationDateBagTawo18"></td>
                <td id="pack-expirationDateCartonTawo18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCWOLF</td>
                <td>18 tháng</td>
                <td id="pack-batchCodeWolf18"></td>
                <td id="pack-expirationDateBagWolf18"></td>
                <td id="pack-expirationDateCartonWolf18"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Bảng cho Filling Machine -->
      <div class="table-container mt-5">
        <h4 class="mb-3">
          <i class="fas fa-cogs"></i> Filling Machine Information
        </h4>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Group</th>
                <th>Production Line</th>
                <th>Shelf Life</th>
                <th>Batch Code</th>
                <th>Expiration Date (Stick)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2IN1</td>
                <td>SANKO 14</td>
                <td>12 tháng</td>
                <td id="fill-batchCodeS14"></td>
                <td id="fill-expirationDateS14"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 12</td>
                <td>9 tháng</td>
                <td id="fill-batchCodeS12"></td>
                <td id="fill-expirationDateS12"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 7</td>
                <td>9 tháng</td>
                <td id="fill-batchCodeS7"></td>
                <td id="fill-expirationDateS7"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 11</td>
                <td>9 tháng</td>
                <td id="fill-batchCodeS11"></td>
                <td id="fill-expirationDateS11"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>TOPACK 3</td>
                <td>9 tháng</td>
                <td id="fill-batchCodeT3"></td>
                <td id="fill-expirationDateT3"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>TOPACK 4</td>
                <td>9 tháng</td>
                <td id="fill-batchCodeT4"></td>
                <td id="fill-expirationDateT4"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 4</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeS4"></td>
                <td id="fill-expirationDateS4"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 8</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeS8"></td>
                <td id="fill-expirationDateS8"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 2</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeS2"></td>
                <td id="fill-expirationDateS2"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 6</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeS6"></td>
                <td id="fill-expirationDateS6"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 1</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeM1"></td>
                <td id="fill-expirationDateM1"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 2</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeM2"></td>
                <td id="fill-expirationDateM2"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 3</td>
                <td>15 tháng</td>
                <td id="fill-batchCodeM3"></td>
                <td id="fill-expirationDateM3"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCMES</td>
                <td>24 tháng</td>
                <td id="fill-batchCodePscmes24"></td>
                <td id="fill-expirationDatePscmes24"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCMES</td>
                <td>18 tháng</td>
                <td id="fill-batchCodePscmes18"></td>
                <td id="fill-expirationDatePscmes18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCUNI</td>
                <td>18 tháng</td>
                <td id="fill-batchCodePscuni"></td>
                <td id="fill-expirationDatePscuni"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>TAM</td>
                <td>18 tháng</td>
                <td id="fill-batchCodeTam"></td>
                <td id="fill-expirationDateTam"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>WOLF 1</td>
                <td>18 tháng</td>
                <td id="fill-batchCodeWolf1"></td>
                <td id="fill-expirationDateWolf1"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>WOLF 2</td>
                <td>18 tháng</td>
                <td id="fill-batchCodeWolf2"></td>
                <td id="fill-expirationDateWolf2"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>WOLF 3</td>
                <td>18 tháng</td>
                <td id="fill-batchCodeWolf3"></td>
                <td id="fill-expirationDateWolf3"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ================== KHU VỰC VALIDATE BẰNG CAMERA ================== -->
      <div class="validator-container mt-5">
        <h4 class="text-center mb-4">Code Validator via Camera</h4>
        <div class="card">
          <div class="card-body">
            <!-- Div riêng cho các lựa chọn -->
            <div id="validator-options">
              <div class="row mb-3">
                <div class="col-md-3">
                  <label for="areaSelect">1. Select Area:</label>
                  <select id="areaSelect" class="form-control"></select>
                </div>
                <div class="col-md-3">
                  <label for="groupSelect">2. Select Group:</label>
                  <select id="groupSelect" class="form-control"></select>
                </div>
                <div class="col-md-3">
                  <label for="productSelect">3. Select Line:</label>
                  <select id="productSelect" class="form-control"></select>
                </div>
                <div class="col-md-3">
                  <label for="codeTypeSelect">4. Select Code Type:</label>
                  <select id="codeTypeSelect" class="form-control">
                    <option value="stick">Stick</option>
                    <option value="bag">Bag</option>
                    <option value="carton">Carton</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Div riêng cho điều khiển camera -->
            <div id="camera-controls">
              <button id="startCameraBtn" class="btn btn-primary" disabled>
                <i class="fas fa-camera"></i> Start Camera
              </button>
              <button
                id="stopCameraBtn"
                class="btn btn-danger"
                style="display: none"
              >
                <i class="fas fa-stop-circle"></i> Stop Camera
              </button>
              <div
                id="cameraFeed"
                class="mt-3"
                style="display: none; position: relative"
              >
                <video
                  id="videoElement"
                  playsinline
                  style="width: 100%; height: auto"
                ></video>
                <div id="viewfinder"></div>
              </div>
              <!-- Đưa nút Capture ra ngoài video feed -->
              <button
                id="captureBtn"
                class="btn btn-success mt-2"
                style="display: none"
              >
                <i class="fas fa-crosshairs"></i> Capture & Validate
              </button>
            </div>

            <p id="ocrStatus" class="mt-2 text-muted"></p>
            <!-- Optional: Add an element to display the processed image for debugging -->
            <!-- <img id="processedImage" class="mt-2" style="max-width: 100%; border: 1px solid #ddd;"> -->
            <div
              id="validationResult"
              class="alert mt-3"
              role="alert"
              style="display: none"
            ></div>
          </div>
        </div>
      </div>
      <!-- ================================================================= -->
    </div>

    <!-- Load scripts at the end for better performance -->
    <!-- Thêm Tesseract.js CDN -->
    <script
      src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"
      defer
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      defer
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
      defer
    ></script>
    <script src="script.js"></script>
  </body>
</html>
