<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Julian Date And Batch Code Display</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="dashboard-header">
        <h1 class="text-center mb-4">Julian Date And Batch Code Display</h1>
        <div class="info-cards">
          <div class="info-card">
            <h5 class="card-title">Current Julian Date</h5>
            <p id="julianDaily" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Date & Time</h5>
            <p id="currentDateTime" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Batch Code (Example)</h5>
            <p
              id="currentBatchCode"
              class="font-weight-bold mb-0"
              style="
                font-family: monospace;
                font-size: 1.2rem;
                color: var(--primary-color);
              "
            ></p>
          </div>
        </div>
      </div>

      <div class="table-container">
        <div id="expiry-info">
          <h5 class="text-primary p-3 mb-0">Shelf Life Expiration Dates</h5>
          <div class="table-responsive">
            <table class="table table-bordered mb-0">
              <thead>
                <tr>
                  <th>Shelf Life</th>
                  <th>Expiration Date</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>9 months</td>
                  <td id="expiry-9"></td>
                </tr>
                <tr>
                  <td>10 months</td>
                  <td id="expiry-10"></td>
                </tr>
                <tr>
                  <td>12 months</td>
                  <td id="expiry-12"></td>
                </tr>
                <tr>
                  <td>15 months</td>
                  <td id="expiry-15"></td>
                </tr>
                <tr>
                  <td>18 months</td>
                  <td id="expiry-18"></td>
                </tr>
                <tr>
                  <td>24 months</td>
                  <td id="expiry-24"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ================== KHU VỰC TÍNH TOÁN MỚI ================== -->
      <div class="calculator-container lazy-load">
        <h4 class="text-center mb-4">Production Date Calculator</h4>
        <div class="row">
          <!-- Tính từ Batch Code -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-barcode"></i> From Batch Code
                </h5>
                <div class="form-group">
                  <label for="batchInput">Enter Batch Code:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="batchInput"
                    placeholder="e.g., 60022131X"
                  />
                </div>
                <button id="calcFromBatchBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
          <!-- Tính từ Hạn sử dụng -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-calendar-times"></i> From Expiration Date
                </h5>
                <div class="form-group">
                  <label for="expiryInput">Enter Expiration Date:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="expiryInput"
                    placeholder="DD.MM.YYYY"
                  />
                </div>
                <div class="form-group">
                  <label for="shelfLifeSelect">Select Shelf Life:</label>
                  <select class="form-control" id="shelfLifeSelect">
                    <option value="9">9 months</option>
                    <option value="10">10 months</option>
                    <option value="12">12 months</option>
                    <option value="15">15 months</option>
                    <option value="18">18 months</option>
                    <option value="24">24 months</option>
                  </select>
                </div>
                <button id="calcFromExpiryBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- Khu vực hiển thị kết quả -->
        <div
          id="calcResult"
          class="alert alert-info mt-4"
          role="alert"
          style="display: none"
        ></div>
      </div>
      <!-- ============================================================= -->

      <div class="table-container">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Group</th>
                <th>Production Line</th>
                <th>Shelf Life</th>
                <th>Batch Code</th>
                <th>Expiration Date (Stick)</th>
                <th>Expiration Date (Bag)</th>
                <th>Expiration Date (Carton)</th>
              </tr>
            </thead>
            <tbody class="lazy-load">
              <tr>
                <td>2IN1</td>
                <td>SANKO 14</td>
                <td>12 tháng</td>
                <td id="batchCode"></td>
                <td id="expirationDate"></td>
                <td id="expirationDateBag"></td>
                <td id="expirationDateCarton"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 12</td>
                <td>9 tháng</td>
                <td id="batchCode2"></td>
                <td id="expirationDate2"></td>
                <td id="expirationDateBag2"></td>
                <td id="expirationDateCarton2"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>SANKO 711</td>
                <td>9 tháng</td>
                <td id="batchCode711"></td>
                <td id="expirationDate711"></td>
                <td id="expirationDateBag711"></td>
                <td id="expirationDateCarton711"></td>
              </tr>
              <tr>
                <td>2IN1</td>
                <td>TOPACK 34</td>
                <td>9 tháng</td>
                <td id="batchCode34"></td>
                <td id="expirationDate34"></td>
                <td id="expirationDateBag34"></td>
                <td id="expirationDateCarton34"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 48</td>
                <td>15 tháng</td>
                <td id="batchCode48"></td>
                <td id="expirationDate48"></td>
                <td id="expirationDateBag48"></td>
                <td id="expirationDateCarton48"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>SANKO 26</td>
                <td>15 tháng</td>
                <td id="batchCode26"></td>
                <td id="expirationDate26"></td>
                <td id="expirationDateBag26"></td>
                <td id="expirationDateCarton26"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 12</td>
                <td>15 tháng</td>
                <td id="batchCodeMes12"></td>
                <td id="expirationDateMes12"></td>
                <td id="expirationDateBagMes12"></td>
                <td id="expirationDateCartonMes12"></td>
              </tr>
              <tr>
                <td>3IN1</td>
                <td>MESPACK 3</td>
                <td>15 tháng</td>
                <td id="batchCodeMes3"></td>
                <td id="expirationDateMes3"></td>
                <td id="expirationDateBagMes3"></td>
                <td id="expirationDateCartonMes3"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>OLYMPIA 2</td>
                <td>12 tháng</td>
                <td id="batchCodeO2"></td>
                <td id="expirationDateO2"></td>
                <td id="expirationDateBagO2"></td>
                <td id="expirationDateCartonO2"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SU 52</td>
                <td>12 tháng</td>
                <td id="batchCodeSu52"></td>
                <td id="expirationDateSu52"></td>
                <td id="expirationDateBagSu52"></td>
                <td id="expirationDateCartonSu52"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>NALBACH</td>
                <td>12 tháng</td>
                <td id="batchCodeNal"></td>
                <td id="expirationDateNal"></td>
                <td id="expirationDateBagNal"></td>
                <td id="expirationDateCartonNal"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SANKO 10</td>
                <td>12 tháng</td>
                <td id="batchCode10"></td>
                <td id="expirationDate10"></td>
                <td id="expirationDateBag10"></td>
                <td id="expirationDateCarton10"></td>
              </tr>
              <tr>
                <td>MILO</td>
                <td>SANKO 10</td>
                <td>10 tháng</td>
                <td id="batchCodeMilk10"></td>
                <td id="expirationDateMilk10"></td>
                <td id="expirationDateBagMilk10"></td>
                <td id="expirationDateCartonMilk10"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>MESPACK</td>
                <td>24 tháng</td>
                <td id="batchCodeGold24"></td>
                <td id="expirationDateGold24"></td>
                <td id="expirationDateBagGold24"></td>
                <td id="expirationDateCartonGold24"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>MESPACK</td>
                <td>18 tháng</td>
                <td id="batchCodeMes18"></td>
                <td id="expirationDateMes18"></td>
                <td id="expirationDateBagMes18"></td>
                <td id="expirationDateCartonMes18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCUNI</td>
                <td>18 tháng</td>
                <td id="batchCodeUni18"></td>
                <td id="expirationDateUni18"></td>
                <td id="expirationDateBagUni18"></td>
                <td id="expirationDateCartonUni18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCTAWO</td>
                <td>18 tháng</td>
                <td id="batchCodeTawo18"></td>
                <td id="expirationDateTawo18"></td>
                <td id="expirationDateBagTawo18"></td>
                <td id="expirationDateCartonTawo18"></td>
              </tr>
              <tr>
                <td>PSC</td>
                <td>PSCWOLF</td>
                <td>18 tháng</td>
                <td id="batchCodeWolf18"></td>
                <td id="expirationDateWolf18"></td>
                <td id="expirationDateBagWolf18"></td>
                <td id="expirationDateCartonWolf18"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ================== KHU VỰC VALIDATE BẰNG CAMERA ================== -->
      <div class="validator-container lazy-load mt-5">
        <h4 class="text-center mb-4">Code Validator via Camera</h4>
        <div class="card">
          <div class="card-body">
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="groupSelect">1. Select Group:</label>
                <select class="form-control" id="groupSelect"></select>
              </div>
              <div class="form-group col-md-4">
                <label for="productSelect">2. Select Production Line:</label>
                <select
                  class="form-control"
                  id="productSelect"
                  disabled
                ></select>
              </div>
              <div class="form-group col-md-4">
                <label for="codeTypeSelect">3. Select Code Type:</label>
                <select class="form-control" id="codeTypeSelect">
                  <option value="stick">Stick</option>
                  <option value="bag">Bag</option>
                  <option value="carton">Carton</option>
                </select>
              </div>
            </div>
            <button id="startCameraBtn" class="btn btn-primary">
              <i class="fas fa-camera"></i> Start Camera
            </button>
            <div id="cameraFeed" class="mt-3" style="display: none">
              <video
                id="videoElement"
                width="100%"
                autoplay
                playsinline
              ></video>
              <button id="captureBtn" class="btn btn-success mt-2">
                <i class="fas fa-crosshairs"></i> Capture & Validate
              </button>
              <p id="ocrStatus" class="mt-2"></p>
            </div>
            <div
              id="validationResult"
              class="alert mt-3"
              style="display: none"
            ></div>
          </div>
        </div>
      </div>
      <!-- ================================================================= -->
    </div>

    <!-- Load scripts at the end for better performance -->
    <!-- Thêm Tesseract.js CDN -->
    <script
      src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"
      defer
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      defer
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
      defer
    ></script>
    <script src="script.js"></script>
  </body>
</html>
